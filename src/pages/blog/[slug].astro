---
import { getCollection, type CollectionEntry } from 'astro:content';
import Main from '~/components/Main.astro';
import BaseLayout from '~/layouts/BaseLayout.astro';

export const getStaticPaths = async () => {
  const posts = await getCollection("posts");
  return posts.map((post) => ({
    params: {slug: post.slug },
    props: {post}
  }));
}

type Props = {
  post: CollectionEntry<"posts">
}

const { post: {data : { title, author }} } = Astro.props;
---

<BaseLayout title={title}>
  <Main>
    <h1>{title}</h1>
    <p>{author}</p>
  </Main>
</BaseLayout>